<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="875px" preserveAspectRatio="none" style="width:685px;height:875px;background:#FFFFFF;" version="1.1" viewBox="0 0 685 875" width="685px" zoomAndPan="magnify"><defs/><g><!--MD5=[92e531b096bc714096ba0676b0cf86b6]
cluster app.softnetwork--><g id="cluster_app.softnetwork"><path d="M8.5,6 L126.5,6 A3.75,3.75 0 0 1 129,8.5 L136,28.4883 L675.5,28.4883 A2.5,2.5 0 0 1 678,30.9883 L678,865.5 A2.5,2.5 0 0 1 675.5,868 L8.5,868 A2.5,2.5 0 0 1 6,865.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="136" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="10" y="21.5352">app.softnetwork</text></g><!--MD5=[1cf0093d12693aaee3e3ee3b97e554cb]
cluster concurrent--><g id="cluster_concurrent"><path d="M133.5,49 L210.5,49 A3.75,3.75 0 0 1 213,51.5 L220,71.4883 L550.5,71.4883 A2.5,2.5 0 0 1 553,73.9883 L553,203.5 A2.5,2.5 0 0 1 550.5,206 L133.5,206 A2.5,2.5 0 0 1 131,203.5 L131,51.5 A2.5,2.5 0 0 1 133.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="131" x2="220" y1="71.4883" y2="71.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="135" y="64.5352">concurrent</text></g><!--MD5=[add671f5daf68a45d73ae19961094345]
cluster persistence.typed.scaladsl--><g id="cluster_persistence.typed.scaladsl"><path d="M32.5,255 L219.5,255 A3.75,3.75 0 0 1 222,257.5 L229,277.4883 L651.5,277.4883 A2.5,2.5 0 0 1 654,279.9883 L654,841.5 A2.5,2.5 0 0 1 651.5,844 L32.5,844 A2.5,2.5 0 0 1 30,841.5 L30,257.5 A2.5,2.5 0 0 1 32.5,255 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="229" y1="277.4883" y2="277.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="186" x="34" y="270.5352">persistence.typed.scaladsl</text></g><!--MD5=[455e3bc6b9b4352bd65ff7b6c51109a4]
class Retryable--><g id="elem_Retryable"><rect codeLine="6" fill="#F1F1F1" height="106.0859" id="Retryable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="147.5" y="84"/><ellipse cx="299.75" cy="104.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M301.0918,111.5605 L298.6431,111.5605 L298.6431,101.3091 L295.4971,101.3091 L295.4971,99.1675 L304.2378,99.1675 L304.2378,101.3091 L301.0918,101.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="334.75" y="100.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="320.25" y="116.668">Retryable</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="529.5" y="81"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="530.5" y="93.6016">T</text><line style="stroke:#181818;stroke-width:0.5;" x1="148.5" x2="535.5" y1="124.6211" y2="124.6211"/><ellipse cx="158.5" cy="138.3652" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="167.5" y="142.1563">nbTries: Int = 1</text><line style="stroke:#181818;stroke-width:0.5;" x1="148.5" x2="535.5" y1="149.1094" y2="149.1094"/><ellipse cx="158.5" cy="162.8535" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="363" x="167.5" y="166.6445">retry(fn: =&gt; Future[T]): Future[T] = retry(nbTries)(fn)</text><ellipse cx="158.5" cy="179.3418" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="347" x="167.5" y="183.1328">«recursive»retry(n: Int)(fn: =&gt; Future[T]): Future[T]</text></g><!--MD5=[efc8ec19c3e08cd56c5087be9ed2056f]
class Patterns--><g id="elem_Patterns"><rect codeLine="13" fill="#F1F1F1" height="254.4805" id="Patterns" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="592" x="46" y="290"/><ellipse cx="211.25" cy="310.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M212.5918,317.5605 L210.1431,317.5605 L210.1431,307.3091 L206.9971,307.3091 L206.9971,305.1675 L215.7378,305.1675 L215.7378,307.3091 L212.5918,307.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="242.25" y="306.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="231.75" y="322.668">Patterns</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="195" x="446" y="287"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="193" x="447" y="299.6016">C: Command, R: CommandResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="637" y1="330.6211" y2="330.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="52" y="348.1563">«type» Recipient</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="52" y="364.6445">timeout: Timeout</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="637" y1="371.5977" y2="371.5977"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="422" x="66" y="389.1328">«implicit» command2Request(command: C): ActorRef[R] =&gt; C</text><rect fill="#808080" height="6" style="stroke:#595959;stroke-width:1.0;" width="6" x="54" y="398.8301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="453" x="66" y="405.6211">recipientRef(recipient: Recipient): akka.actor.typed.RecipientRef[C]</text><ellipse cx="57" cy="418.3184" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="566" x="66" y="422.1094">?(recipient: Recipient, command: C): Future[R] = recipientRef(recipient) ? command</text><ellipse cx="57" cy="434.8066" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="526" x="66" y="438.5977">!(recipient: Recipient, command: C): Unit = recipientRef(recipient) ! command</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303" x="66" y="455.0859">«implicit» key2Recipient[T](key: T): Recipient</text><polygon fill="#E9E9E9" points="57,462.7832,61,466.7832,57,470.7832,53,466.7832" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="300" x="66" y="471.5742">lookup[T](key: T): Future[Option[Recipient]]</text><ellipse cx="57" cy="484.2715" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="66" y="488.0625">??[T](key: T, command: C): Future[R]</text><ellipse cx="57" cy="500.7598" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="66" y="504.5508">?![T](key: T, command: C): Unit</text><ellipse cx="57" cy="517.248" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="321" x="66" y="521.0391">*?[T](keys: List[T], command: C): Future[List[R]]</text><ellipse cx="57" cy="533.7363" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="250" x="66" y="537.5273">*![T](keys: List[T], command: C): Unit</text></g><!--MD5=[263b12883196fc438116ea59d3bbd821]
class EntityPattern--><g id="elem_EntityPattern"><rect codeLine="28" fill="#F1F1F1" height="65.1094" id="EntityPattern" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="386" x="149" y="605"/><ellipse cx="164" cy="625.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M165.3418,632.5605 L162.8931,632.5605 L162.8931,622.3091 L159.7471,622.3091 L159.7471,620.1675 L168.4878,620.1675 L168.4878,622.3091 L165.3418,622.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="337.5" y="621.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="354" x="178" y="637.668">EntityPattern[C &lt;: Command, R &lt;: CommandResult]</text><line style="stroke:#181818;stroke-width:0.5;" x1="150" x2="534" y1="645.6211" y2="645.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="155" y="663.1563">«type» Recipient = String</text></g><!--MD5=[1f06e778de7755814024fd9e3211c3d0]
class RecipientPattern--><g id="elem_RecipientPattern"><rect codeLine="31" fill="#F1F1F1" height="80.9766" id="RecipientPattern" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="270" y="747"/><ellipse cx="285" cy="763" fill="#C2C2C2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M287.4731,769.1431 Q286.8921,769.4419 286.2529,769.5913 Q285.6138,769.7407 284.9082,769.7407 Q282.4014,769.7407 281.0815,768.0889 Q279.7617,766.437 279.7617,763.3159 Q279.7617,760.1865 281.0815,758.5347 Q282.4014,756.8828 284.9082,756.8828 Q285.6138,756.8828 286.2612,757.0322 Q286.9087,757.1816 287.4731,757.4805 L287.4731,760.2031 Q286.8423,759.6221 286.2488,759.3523 Q285.6553,759.0825 285.0244,759.0825 Q283.6797,759.0825 282.9949,760.1492 Q282.3101,761.2158 282.3101,763.3159 Q282.3101,765.4077 282.9949,766.4744 Q283.6797,767.541 285.0244,767.541 Q285.6553,767.541 286.2488,767.2712 Q286.8423,767.0015 287.4731,766.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="299" y="768.291">RecipientPattern</text><line style="stroke:#181818;stroke-width:0.5;" x1="271" x2="413" y1="779" y2="779"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="276" y="796.5352">entityId: String</text><line style="stroke:#181818;stroke-width:0.5;" x1="271" x2="413" y1="803.4883" y2="803.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="276" y="821.0234">ref(): EntityRef[C]</text></g><!--MD5=[ba7ab25a5c3a7d059318af3d9c16dbdb]
reverse link Retryable to Patterns--><g id="link_Retryable_Patterns"><path codeLine="27" d="M342,210.97 C342,235.14 342,262.79 342,289.78 " fill="none" id="Retryable-backto-Patterns" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="335,211.29,342,191.29,349,211.29,335,211.29" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="343" y="235.5684">«bind» &lt;R -&gt; T&gt;</text></g><!--MD5=[28213d457a0bb7aee0fb1cf7845a91ed]
reverse link Patterns to EntityPattern--><g id="link_Patterns_EntityPattern"><path d="M342,565.44 C342,579.89 342,593.32 342,604.52 " fill="none" id="Patterns-backto-EntityPattern" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="335,565.47,342,545.47,349,565.47,335,565.47" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4443dc3a63986ba339fdf03acf8f3c90]
reverse link EntityPattern to RecipientPattern--><g id="link_EntityPattern_RecipientPattern"><path codeLine="35" d="M342,686.17 C342,705.67 342,727.99 342,746.61 " fill="none" id="EntityPattern-backto-RecipientPattern" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="342" cy="679.25" fill="#FFFFFF" rx="8" ry="8" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342" x2="342" y1="687.25" y2="671.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="334" x2="350" y1="679.25" y2="679.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="343" y="713.5684">«implicit»</text></g><!--MD5=[af21b88b03177f717b7f67148f8ea050]
@startuml Patterns
skinparam monochrome true
hide empty members

package app.softnetwork {
    package concurrent {
        abstract Retryable <T> <<(T,orchid) trait>> {
            +nbTries: Int = 1
            +retry(fn: => Future[T]): Future[T] = retry(nbTries)(fn)
            +<<recursive>>retry(n: Int)(fn: => Future[T]): Future[T]
        }
    }
    package persistence.typed.scaladsl {
        abstract Patterns <C: Command, R: CommandResult> <<(T,orchid) trait>>{
            <<type>> Recipient
            <<implicit>> command2Request(command: C): ActorRef[R] => C
            timeout: Timeout
            -recipientRef(recipient: Recipient): akka.actor.typed.RecipientRef[C]
            +?(recipient: Recipient, command: C): Future[R] = recipientRef(recipient) ? command
            +!(recipient: Recipient, command: C): Unit = recipientRef(recipient) ! command
            <<implicit>> key2Recipient[T](key: T): Recipient
            #lookup[T](key: T): Future[Option[Recipient]]
            +??[T](key: T, command: C): Future[R]
            +?![T](key: T, command: C): Unit
            +*?[T](keys: List[T], command: C): Future[List[R]]
            +*![T](keys: List[T], command: C): Unit
        }
        Retryable <|- - Patterns: <<bind>> <R -> T>
        abstract "EntityPattern[C <: Command, R <: CommandResult]" as EntityPattern <<(T,orchid) trait>> extends Patterns{
            <<type>> Recipient = String
        }
        class RecipientPattern {
          entityId: String
          ref(): EntityRef[C]
        }
        EntityPattern +- - RecipientPattern: <<implicit>>
    }
}
@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>