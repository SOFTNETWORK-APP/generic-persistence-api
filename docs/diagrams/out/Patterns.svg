<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="981px" preserveAspectRatio="none" style="width:1897px;height:981px;background:#FFFFFF;" version="1.1" viewBox="0 0 1897 981" width="1897px" zoomAndPan="magnify"><defs/><g><!--MD5=[92e531b096bc714096ba0676b0cf86b6]
cluster app.softnetwork--><g id="cluster_app.softnetwork"><path d="M8.5,6 L126.5,6 A3.75,3.75 0 0 1 129,8.5 L136,28.4883 L1887.5,28.4883 A2.5,2.5 0 0 1 1890,30.9883 L1890,971.5 A2.5,2.5 0 0 1 1887.5,974 L8.5,974 A2.5,2.5 0 0 1 6,971.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="136" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="10" y="21.5352">app.softnetwork</text></g><!--MD5=[1cf0093d12693aaee3e3ee3b97e554cb]
cluster concurrent--><g id="cluster_concurrent"><path d="M913.5,49 L990.5,49 A3.75,3.75 0 0 1 993,51.5 L1000,71.4883 L1330.5,71.4883 A2.5,2.5 0 0 1 1333,73.9883 L1333,203.5 A2.5,2.5 0 0 1 1330.5,206 L913.5,206 A2.5,2.5 0 0 1 911,203.5 L911,51.5 A2.5,2.5 0 0 1 913.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="911" x2="1000" y1="71.4883" y2="71.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76" x="915" y="64.5352">concurrent</text></g><!--MD5=[17f6721f56ea66e90eeb34d205c9588f]
cluster persistence.typed--><g id="cluster_persistence.typed"><path d="M32.5,255 L158.5,255 A3.75,3.75 0 0 1 161,257.5 L168,277.4883 L1455.5,277.4883 A2.5,2.5 0 0 1 1458,279.9883 L1458,947.5 A2.5,2.5 0 0 1 1455.5,950 L32.5,950 A2.5,2.5 0 0 1 30,947.5 L30,257.5 A2.5,2.5 0 0 1 32.5,255 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="168" y1="277.4883" y2="277.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="125" x="34" y="270.5352">persistence.typed</text></g><!--MD5=[6dcebea560b13200095a72e6c1b59982]
cluster scaladsl--><g id="cluster_scaladsl"><path d="M709.5,298 L768.5,298 A3.75,3.75 0 0 1 771,300.5 L778,320.4883 L1431.5,320.4883 A2.5,2.5 0 0 1 1434,322.9883 L1434,923.5 A2.5,2.5 0 0 1 1431.5,926 L709.5,926 A2.5,2.5 0 0 1 707,923.5 L707,300.5 A2.5,2.5 0 0 1 709.5,298 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="707" x2="778" y1="320.4883" y2="320.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58" x="711" y="313.5352">scaladsl</text></g><!--MD5=[5ec7aa4828d855cca1cc89c854641ced]
cluster persistence.service--><g id="cluster_persistence.service"><path d="M1484.5,650 L1620.5,650 A3.75,3.75 0 0 1 1623,652.5 L1630,672.4883 L1863.5,672.4883 A2.5,2.5 0 0 1 1866,674.9883 L1866,763.5 A2.5,2.5 0 0 1 1863.5,766 L1484.5,766 A2.5,2.5 0 0 1 1482,763.5 L1482,652.5 A2.5,2.5 0 0 1 1484.5,650 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1482" x2="1630" y1="672.4883" y2="672.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1486" y="665.5352">persistence.service</text></g><!--MD5=[455e3bc6b9b4352bd65ff7b6c51109a4]
class Retryable--><g id="elem_Retryable"><rect codeLine="6" fill="#F1F1F1" height="106.0859" id="Retryable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="927.5" y="84"/><ellipse cx="1079.75" cy="104.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1081.0918,111.5605 L1078.6431,111.5605 L1078.6431,101.3091 L1075.4971,101.3091 L1075.4971,99.1675 L1084.2378,99.1675 L1084.2378,101.3091 L1081.0918,101.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1114.75" y="100.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="1100.25" y="116.668">Retryable</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="1309.5" y="81"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="1310.5" y="93.6016">T</text><line style="stroke:#181818;stroke-width:0.5;" x1="928.5" x2="1315.5" y1="124.6211" y2="124.6211"/><ellipse cx="938.5" cy="138.3652" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="947.5" y="142.1563">nbTries: Int = 1</text><line style="stroke:#181818;stroke-width:0.5;" x1="928.5" x2="1315.5" y1="149.1094" y2="149.1094"/><ellipse cx="938.5" cy="162.8535" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="363" x="947.5" y="166.6445">retry(fn: =&gt; Future[T]): Future[T] = retry(nbTries)(fn)</text><ellipse cx="938.5" cy="179.3418" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="347" x="947.5" y="183.1328">«recursive»retry(n: Int)(fn: =&gt; Future[T]): Future[T]</text></g><!--MD5=[e8dbbcecc707ce203655be52ea7e778f]
class CommandTypeKey--><g id="elem_CommandTypeKey"><rect codeLine="13" fill="#F1F1F1" height="65.1094" id="CommandTypeKey" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="393" x="46.5" y="427.5"/><ellipse cx="135.25" cy="447.8105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M136.5918,455.0605 L134.1431,455.0605 L134.1431,444.8091 L130.9971,444.8091 L130.9971,442.6675 L139.7378,442.6675 L139.7378,444.8091 L136.5918,444.8091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="202.25" y="444.1016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="128" x="155.75" y="460.168">CommandTypeKey</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="77" x="365.5" y="424.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75" x="366.5" y="437.1016">C: Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="438.5" y1="468.1211" y2="468.1211"/><ellipse cx="57.5" cy="481.8652" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="367" x="66.5" y="485.6563">def TypeKey(implicit c: ClassTag[C]): EntityTypeKey[C]</text></g><path d="M475,434.5 L475,450.8105 L433.5,480.3652 L475,458.8105 L475,475.1211 A0,0 0 0 0 475,475.1211 L691,475.1211 A0,0 0 0 0 691,475.1211 L691,444.5 L681,434.5 L475,434.5 A0,0 0 0 0 475,434.5 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M681,434.5 L681,444.5 L691,444.5 L681,434.5 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="481" y="452.0684">A key that uniquely identifies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="481" y="467.3789">the type of entity in the cluster</text><!--MD5=[efc8ec19c3e08cd56c5087be9ed2056f]
class Patterns--><g id="elem_Patterns"><rect codeLine="21" fill="#F1F1F1" height="254.4805" id="Patterns" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="592" x="826" y="333"/><ellipse cx="991.25" cy="353.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M992.5918,360.5605 L990.1431,360.5605 L990.1431,350.3091 L986.9971,350.3091 L986.9971,348.1675 L995.7378,348.1675 L995.7378,350.3091 L992.5918,350.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1022.25" y="349.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="1011.75" y="365.668">Patterns</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="195" x="1226" y="330"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="193" x="1227" y="342.6016">C: Command, R: CommandResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="827" x2="1417" y1="373.6211" y2="373.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="832" y="391.1563">«type» Recipient</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="832" y="407.6445">timeout: Timeout</text><line style="stroke:#181818;stroke-width:0.5;" x1="827" x2="1417" y1="414.5977" y2="414.5977"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="422" x="846" y="432.1328">«implicit» command2Request(command: C): ActorRef[R] =&gt; C</text><rect fill="#808080" height="6" style="stroke:#595959;stroke-width:1.0;" width="6" x="834" y="441.8301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="453" x="846" y="448.6211">recipientRef(recipient: Recipient): akka.actor.typed.RecipientRef[C]</text><ellipse cx="837" cy="461.3184" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="566" x="846" y="465.1094">?(recipient: Recipient, command: C): Future[R] = recipientRef(recipient) ? command</text><ellipse cx="837" cy="477.8066" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="526" x="846" y="481.5977">!(recipient: Recipient, command: C): Unit = recipientRef(recipient) ! command</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303" x="846" y="498.0859">«implicit» key2Recipient[T](key: T): Recipient</text><polygon fill="#E9E9E9" points="837,505.7832,841,509.7832,837,513.7832,833,509.7832" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="300" x="846" y="514.5742">lookup[T](key: T): Future[Option[Recipient]]</text><ellipse cx="837" cy="527.2715" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="846" y="531.0625">??[T](key: T, command: C): Future[R]</text><ellipse cx="837" cy="543.7598" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="846" y="547.5508">?![T](key: T, command: C): Unit</text><ellipse cx="837" cy="560.248" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="321" x="846" y="564.0391">*?[T](keys: List[T], command: C): Future[List[R]]</text><ellipse cx="837" cy="576.7363" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="250" x="846" y="580.5273">*![T](keys: List[T], command: C): Unit</text></g><!--MD5=[263b12883196fc438116ea59d3bbd821]
class EntityPattern--><g id="elem_EntityPattern"><rect codeLine="36" fill="#F1F1F1" height="65.1094" id="EntityPattern" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="316" x="723" y="685"/><ellipse cx="738" cy="705.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M739.3418,712.5605 L736.8931,712.5605 L736.8931,702.3091 L733.7471,702.3091 L733.7471,700.1675 L742.4878,700.1675 L742.4878,702.3091 L739.3418,702.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="778" y="701.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="87" x="752" y="717.668">EntityPattern</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="195" x="847" y="682"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="193" x="848" y="694.6016">C: Command, R: CommandResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="724" x2="1038" y1="725.6211" y2="725.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="729" y="743.1563">«type» Recipient = String</text></g><!--MD5=[da5807ac236da24bd897a7946913cf27]
class SingletonPattern--><g id="elem_SingletonPattern"><rect codeLine="40" fill="#F1F1F1" height="40.6211" id="SingletonPattern" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="343" x="1074.5" y="697"/><ellipse cx="1089.5" cy="717.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1090.8418,724.5605 L1088.3931,724.5605 L1088.3931,714.3091 L1085.2471,714.3091 L1085.2471,712.1675 L1093.9878,712.1675 L1093.9878,714.3091 L1090.8418,714.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1143" y="713.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="114" x="1103.5" y="729.668">SingletonPattern</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="195" x="1225.5" y="694"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="193" x="1226.5" y="706.6016">C: Command, R: CommandResult</text></g><!--MD5=[1f06e778de7755814024fd9e3211c3d0]
class RecipientPattern--><g id="elem_RecipientPattern"><rect codeLine="41" fill="#F1F1F1" height="80.9766" id="RecipientPattern" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="809" y="829"/><ellipse cx="824" cy="845" fill="#C2C2C2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M826.4731,851.1431 Q825.8921,851.4419 825.2529,851.5913 Q824.6138,851.7407 823.9082,851.7407 Q821.4014,851.7407 820.0815,850.0889 Q818.7617,848.437 818.7617,845.3159 Q818.7617,842.1865 820.0815,840.5347 Q821.4014,838.8828 823.9082,838.8828 Q824.6138,838.8828 825.2612,839.0322 Q825.9087,839.1816 826.4731,839.4805 L826.4731,842.2031 Q825.8423,841.6221 825.2488,841.3523 Q824.6553,841.0825 824.0244,841.0825 Q822.6797,841.0825 821.9949,842.1492 Q821.3101,843.2158 821.3101,845.3159 Q821.3101,847.4077 821.9949,848.4744 Q822.6797,849.541 824.0244,849.541 Q824.6553,849.541 825.2488,849.2712 Q825.8423,849.0015 826.4731,848.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="838" y="850.291">RecipientPattern</text><line style="stroke:#181818;stroke-width:0.5;" x1="810" x2="952" y1="861" y2="861"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="815" y="878.5352">entityId: String</text><line style="stroke:#181818;stroke-width:0.5;" x1="810" x2="952" y1="885.4883" y2="885.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="815" y="903.0234">ref(): EntityRef[C]</text></g><!--MD5=[dbb8b4f13c7b21394f9d757e58732f45]
class Service--><g id="elem_Service"><rect codeLine="49" fill="#F1F1F1" height="65.1094" id="Service" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="352" x="1498" y="685"/><ellipse cx="1547.25" cy="705.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1548.5918,712.5605 L1546.1431,712.5605 L1546.1431,702.3091 L1542.9971,702.3091 L1542.9971,700.1675 L1551.7378,700.1675 L1551.7378,702.3091 L1548.5918,702.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1574.25" y="701.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48" x="1567.75" y="717.668">Service</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="195" x="1658" y="682"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="193" x="1659" y="694.6016">C: Command, R: CommandResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="1499" x2="1849" y1="725.6211" y2="725.6211"/><ellipse cx="1509" cy="739.3652" fill="#A6A6A6" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="326" x="1518" y="743.1563">def run(entityId: String, command: C): Future[R]</text></g><!--MD5=[ba7ab25a5c3a7d059318af3d9c16dbdb]
reverse link Retryable to Patterns--><g id="link_Retryable_Patterns"><path codeLine="35" d="M1122,211.19 C1122,247.11 1122,291.41 1122,332.57 " fill="none" id="Retryable-backto-Patterns" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1115,211.29,1122,191.29,1129,211.29,1115,211.29" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="1123" y="235.5684">«bind» &lt;R -&gt; T&gt;</text></g><!--MD5=[28213d457a0bb7aee0fb1cf7845a91ed]
reverse link Patterns to EntityPattern--><g id="link_Patterns_EntityPattern"><path d="M1021.6,603.08 C1012.31,613.88 1002.73,624.33 993,634 C974.25,652.64 951.04,670.43 930.63,684.69 " fill="none" id="Patterns-backto-EntityPattern" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1016.78,598.93,1034.96,588.06,1027.53,607.9,1016.78,598.93" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c9d2451bb95792f305f6762670b1674e]
reverse link CommandTypeKey to EntityPattern--><g id="link_CommandTypeKey_EntityPattern"><path codeLine="39" d="M307.45,504.13 C349.1,530.63 405.2,563.83 458,587 C552.41,628.44 664.13,662.03 749.04,684.61 " fill="none" id="CommandTypeKey-backto-EntityPattern" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="303.99,509.58,290.97,492.86,311.57,497.81,303.99,509.58" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="572" y="630.5684">«self»</text></g><!--MD5=[7426c6e3bf341126ad9af967fce70b58]
reverse link Patterns to SingletonPattern--><g id="link_Patterns_SingletonPattern"><path d="M1192.43,606.13 C1209.85,642.02 1226.37,676.04 1236.34,696.59 " fill="none" id="Patterns-backto-SingletonPattern" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1185.71,609.3,1183.27,588.25,1198.3,603.19,1185.71,609.3" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4443dc3a63986ba339fdf03acf8f3c90]
reverse link EntityPattern to RecipientPattern--><g id="link_EntityPattern_RecipientPattern"><path codeLine="45" d="M881,766.04 C881,786.21 881,809.46 881,828.71 " fill="none" id="EntityPattern-backto-RecipientPattern" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="881" cy="759.31" fill="#FFFFFF" rx="8" ry="8" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="881" x2="881" y1="767.31" y2="751.31"/><line style="stroke:#181818;stroke-width:1.0;" x1="873" x2="889" y1="759.31" y2="759.31"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="882" y="795.5684">«implicit»</text></g><!--MD5=[9b8e58b21d31b5a7e91f4de8e906bef4]
reverse link Patterns to Service--><g id="link_Patterns_Service"><path codeLine="52" d="M1413.87,596.1 C1485.41,629.21 1555.53,661.66 1604.91,684.52 " fill="none" id="Patterns-backto-Service" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1411.38,602.19,1396.17,587.44,1417.26,589.49,1411.38,602.19" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="1496" y="630.5684">«self»</text></g><!--MD5=[84cd3768c1342b582f3af8ae2943b885]
@startuml Patterns
skinparam monochrome true
hide empty members

package app.softnetwork {
    package concurrent {
        abstract Retryable <T> <<(T,orchid) trait>> {
            +nbTries: Int = 1
            +retry(fn: => Future[T]): Future[T] = retry(nbTries)(fn)
            +<<recursive>>retry(n: Int)(fn: => Future[T]): Future[T]
        }
    }
    package persistence.typed {
        abstract class CommandTypeKey <C: Command> <<(T,orchid) trait >> {
            +def TypeKey(implicit c: ClassTag[C]): EntityTypeKey[C]
        }
        note right of CommandTypeKey::TypeKey
            A key that uniquely identifies
            the type of entity in the cluster
        end note
        package scaladsl {
            abstract Patterns <C: Command, R: CommandResult> <<(T,orchid) trait>>{
                <<type>> Recipient
                <<implicit>> command2Request(command: C): ActorRef[R] => C
                timeout: Timeout
                -recipientRef(recipient: Recipient): akka.actor.typed.RecipientRef[C]
                +?(recipient: Recipient, command: C): Future[R] = recipientRef(recipient) ? command
                +!(recipient: Recipient, command: C): Unit = recipientRef(recipient) ! command
                <<implicit>> key2Recipient[T](key: T): Recipient
                #lookup[T](key: T): Future[Option[Recipient]]
                +??[T](key: T, command: C): Future[R]
                +?![T](key: T, command: C): Unit
                +*?[T](keys: List[T], command: C): Future[List[R]]
                +*![T](keys: List[T], command: C): Unit
            }
            Retryable <|- - Patterns: <<bind>> <R -> T>
            abstract EntityPattern <C: Command, R: CommandResult> <<(T,orchid) trait>> extends Patterns{
                <<type>> Recipient = String
            }
            CommandTypeKey <|.. EntityPattern : <<self>>
            abstract SingletonPattern <C: Command, R: CommandResult> <<(T,orchid) trait>> extends Patterns
            class RecipientPattern {
              entityId: String
              ref(): EntityRef[C]
            }
            EntityPattern +- - RecipientPattern: <<implicit>>
        }
    }
    package persistence.service {
        abstract Service <C: Command, R: CommandResult> <<(T,orchid) trait>>{
            +def run(entityId: String, command: C): Future[R]
        }
        Patterns <|.. Service: <<self>>
    }
}
@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>