<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="388px" preserveAspectRatio="none" style="width:1709px;height:388px;background:#FFFFFF;" version="1.1" viewBox="0 0 1709 388" width="1709px" zoomAndPan="magnify"><defs/><g><!--MD5=[11eb2407d6ff70dab97e58b348856eff]
cluster app.softnetwork.persistence--><g id="cluster_app.softnetwork.persistence"><path d="M8.5,6 L211.5,6 A3.75,3.75 0 0 1 214,8.5 L221,28.4883 L1699.5,28.4883 A2.5,2.5 0 0 1 1702,30.9883 L1702,379 A2.5,2.5 0 0 1 1699.5,381.5 L8.5,381.5 A2.5,2.5 0 0 1 6,379 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="221" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="202" x="10" y="21.5352">app.softnetwork.persistence</text></g><!--MD5=[baf563710780cbbbf3058eba83f258a9]
cluster query--><g id="cluster_query"><path d="M32.5,49 L73.5,49 A3.75,3.75 0 0 1 76,51.5 L83,71.4883 L1257.5,71.4883 A2.5,2.5 0 0 1 1260,73.9883 L1260,355 A2.5,2.5 0 0 1 1257.5,357.5 L32.5,357.5 A2.5,2.5 0 0 1 30,355 L30,51.5 A2.5,2.5 0 0 1 32.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="83" y1="71.4883" y2="71.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40" x="34" y="64.5352">query</text></g><!--MD5=[6ae39618a49f232016e9ffc52ae96b7f]
cluster jdbc.query--><g id="cluster_jdbc.query"><path d="M1286.5,245 L1360.5,245 A3.75,3.75 0 0 1 1363,247.5 L1370,267.4883 L1675.5,267.4883 A2.5,2.5 0 0 1 1678,269.9883 L1678,334.5 A2.5,2.5 0 0 1 1675.5,337 L1286.5,337 A2.5,2.5 0 0 1 1284,334.5 L1284,247.5 A2.5,2.5 0 0 1 1286.5,245 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1284" x2="1370" y1="267.4883" y2="267.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="1288" y="260.5352">jdbc.query</text></g><!--MD5=[641747e520e486555e141a68af8ebd7c]
class JournalProvider--><g id="elem_JournalProvider"><rect codeLine="8" fill="#F1F1F1" height="81.5977" id="JournalProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="544" x="46" y="92"/><ellipse cx="260.75" cy="112.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M262.0918,119.5605 L259.6431,119.5605 L259.6431,109.3091 L256.4971,109.3091 L256.4971,107.1675 L265.2378,107.1675 L265.2378,109.3091 L262.0918,109.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="316.75" y="108.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106" x="281.25" y="124.668">JournalProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="589" y1="132.6211" y2="132.6211"/><polygon fill="#E9E9E9" points="57,141.3652,61,145.3652,57,149.3652,53,145.3652" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="518" x="66" y="150.1563">def eventsByTag(tag: String, offset: Offset): Source[EventEnvelope, NotUsed]</text><polygon fill="#E9E9E9" points="57,157.8535,61,161.8535,57,165.8535,53,161.8535" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="355" x="66" y="166.6445">def currentPersistenceIds(): Source[String, NotUsed]</text></g><!--MD5=[ba617a721592a3e7edd6fab505e555de]
class InMemoryJournalProvider--><g id="elem_InMemoryJournalProvider"><rect codeLine="12" fill="#F1F1F1" height="40.6211" id="InMemoryJournalProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="138" y="280"/><ellipse cx="153" cy="300.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M154.3418,307.5605 L151.8931,307.5605 L151.8931,297.3091 L148.7471,297.3091 L148.7471,295.1675 L157.4878,295.1675 L157.4878,297.3091 L154.3418,297.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="236.5" y="296.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="174" x="167" y="312.668">InMemoryJournalProvider</text></g><!--MD5=[11ef12d93c5e6efdc5e855690bdbe745]
class OffsetProvider--><g id="elem_OffsetProvider"><rect codeLine="13" fill="#F1F1F1" height="98.0859" id="OffsetProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="324" x="920" y="84"/><ellipse cx="1028.75" cy="104.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1030.0918,111.5605 L1027.6431,111.5605 L1027.6431,101.3091 L1024.4971,101.3091 L1024.4971,99.1675 L1033.2378,99.1675 L1033.2378,101.3091 L1030.0918,101.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1080.75" y="100.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="98" x="1049.25" y="116.668">OffsetProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="921" x2="1243" y1="124.6211" y2="124.6211"/><polygon fill="#E9E9E9" points="931,133.3652,935,137.3652,931,141.3652,927,137.3652" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="940" y="142.1563">def initOffset(): Unit</text><polygon fill="#E9E9E9" points="931,149.8535,935,153.8535,931,157.8535,927,153.8535" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="940" y="158.6445">def readOffset(): Future[Offset]</text><polygon fill="#E9E9E9" points="931,166.3418,935,170.3418,931,174.3418,927,170.3418" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="298" x="940" y="175.1328">def writeOffset(offset: Offset): Future[Done]</text></g><!--MD5=[7b30ccf0ea8e0602b76fabdbae6fd634]
class InMemoryOffsetProvider--><g id="elem_InMemoryOffsetProvider"><rect codeLine="18" fill="#F1F1F1" height="40.6211" id="InMemoryOffsetProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="1046" y="280"/><ellipse cx="1061" cy="300.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1062.3418,307.5605 L1059.8931,307.5605 L1059.8931,297.3091 L1056.7471,297.3091 L1056.7471,295.1675 L1065.4878,295.1675 L1065.4878,297.3091 L1062.3418,297.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1140.5" y="296.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="166" x="1075" y="312.668">InMemoryOffsetProvider</text></g><!--MD5=[47c5631f1805589a1728e56bb99807d9]
class EventProcessorStream--><g id="elem_EventProcessorStream"><rect codeLine="21" fill="#F1F1F1" height="81.5977" id="EventProcessorStream" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="632" x="379" y="259.5"/><ellipse cx="589.75" cy="279.8105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M591.0918,287.0605 L588.6431,287.0605 L588.6431,276.8091 L585.4971,276.8091 L585.4971,274.6675 L594.2378,274.6675 L594.2378,276.8091 L591.0918,276.8091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="668.75" y="276.1016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="152" x="610.25" y="292.168">EventProcessorStream</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="48" x="966" y="256.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="46" x="967" y="269.1016">E: Event</text><line style="stroke:#181818;stroke-width:0.5;" x1="380" x2="1010" y1="300.1211" y2="300.1211"/><polygon fill="#E9E9E9" points="390,308.8652,394,312.8652,390,316.8652,386,312.8652" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="399" y="317.6563">def init(): Unit</text><polygon fill="#E9E9E9" points="390,325.3535,394,329.3535,390,333.3535,386,329.3535" style="stroke:#8C8C8C;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="606" x="399" y="334.1445">def processEvent(event: E, persistenceId: PersistenceId, sequenceNr: Long): Future[Done]</text></g><!--MD5=[be487b3bb751466a4a7bf5087ababc69]
class EventStream--><g id="elem_EventStream"><rect codeLine="25" fill="#F1F1F1" height="81.5977" id="EventStream" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="259" x="625.5" y="92"/><ellipse cx="708.25" cy="112.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M709.5918,119.5605 L707.1431,119.5605 L707.1431,109.3091 L703.9971,109.3091 L703.9971,107.1675 L712.7378,107.1675 L712.7378,109.3091 L709.5918,109.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="753.75" y="108.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="85" x="728.75" y="124.668">EventStream</text><line style="stroke:#181818;stroke-width:0.5;" x1="626.5" x2="883.5" y1="132.6211" y2="132.6211"/><ellipse cx="636.5" cy="146.3652" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="645.5" y="150.1563">def tag: String</text><ellipse cx="636.5" cy="162.8535" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="645.5" y="166.6445">def eventProcessorId: String = tag</text></g><!--MD5=[ecc2d92c3f86452432ada8cdef010113]
class JdbcJournalProvider--><g id="elem_JdbcJournalProvider"><rect codeLine="31" fill="#F1F1F1" height="40.6211" id="JdbcJournalProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167" x="1300.5" y="280"/><ellipse cx="1315.5" cy="300.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1316.8418,307.5605 L1314.3931,307.5605 L1314.3931,297.3091 L1311.2471,297.3091 L1311.2471,295.1675 L1319.9878,295.1675 L1319.9878,297.3091 L1316.8418,297.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1379.5" y="296.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="135" x="1329.5" y="312.668">JdbcJournalProvider</text></g><!--MD5=[886c6bf4b8b74ff17330f79050ec803b]
class JdbcOffsetProvider--><g id="elem_JdbcOffsetProvider"><rect codeLine="32" fill="#F1F1F1" height="40.6211" id="JdbcOffsetProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="1502.5" y="280"/><ellipse cx="1517.5" cy="300.3105" fill="#9B9B9B" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1518.8418,307.5605 L1516.3931,307.5605 L1516.3931,297.3091 L1513.2471,297.3091 L1513.2471,295.1675 L1521.9878,295.1675 L1521.9878,297.3091 L1518.8418,297.3091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="1577.5" y="296.6016">«trait»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="127" x="1531.5" y="312.668">JdbcOffsetProvider</text></g><!--MD5=[0464a0b9498a640fab16e8a5aa325c9d]
reverse link JournalProvider to InMemoryJournalProvider--><g id="link_JournalProvider_InMemoryJournalProvider"><path d="M290.48,193.14 C276.33,223.57 260.01,258.64 250.1,279.93 " fill="none" id="JournalProvider-backto-InMemoryJournalProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="284.38,190.67,299.16,175.49,297.07,196.57,284.38,190.67" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a917c91f8d86d7c7b763e6253684958f]
reverse link OffsetProvider to InMemoryOffsetProvider--><g id="link_OffsetProvider_InMemoryOffsetProvider"><path d="M1107.77,201.71 C1118.48,229.83 1130.1,260.36 1137.46,279.69 " fill="none" id="OffsetProvider-backto-InMemoryOffsetProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1100.96,204.5,1100.39,183.31,1114.05,199.52,1100.96,204.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6db5f818ee06bf3ecc49a4c7fb9b775e]
reverse link JournalProvider to EventProcessorStream--><g id="link_JournalProvider_EventProcessorStream"><path codeLine="19" d="M429.27,182.85 C484.48,207.08 550.39,236.02 602.75,259 " fill="none" id="JournalProvider-backto-EventProcessorStream" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="426.72,188.93,411.22,174.49,432.35,176.12,426.72,188.93" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="530" y="225.5684">«self»</text></g><!--MD5=[f5d00a62b638a1ce86e521c8848c1f10]
reverse link OffsetProvider to EventProcessorStream--><g id="link_OffsetProvider_EventProcessorStream"><path codeLine="20" d="M949.73,190.57 C897.15,213.05 837.84,238.42 789.69,259.01 " fill="none" id="OffsetProvider-backto-EventProcessorStream" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="946.62,183.85,967.76,182.43,952.13,196.73,946.62,183.85" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="889" y="225.5684">«self»</text></g><!--MD5=[94d8b7d5c6613957e42d26fb32713559]
reverse link EventStream to EventProcessorStream--><g id="link_EventStream_EventProcessorStream"><path d="M733.26,193.96 C725.41,215.63 716.73,239.56 709.63,259.15 " fill="none" id="EventStream-backto-EventProcessorStream" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="726.92,191.9,740.32,175.49,740.09,196.67,726.92,191.9" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a82806b750a05c4247036be8b4c24bf5]
reverse link JournalProvider to JdbcJournalProvider--><g id="link_JournalProvider_JdbcJournalProvider"><path d="M573.29,177.41 C585.01,179.04 596.62,180.58 608,182 C896.57,217.99 980.16,157.89 1260,237 C1293.41,246.44 1328.46,265.04 1352.75,279.5 " fill="none" id="JournalProvider-backto-JdbcJournalProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="572.62,184.25,553.81,174.5,574.59,170.39,572.62,184.25" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[49a78251873e9deee7cfef4be8f2cb18]
reverse link OffsetProvider to JdbcOffsetProvider--><g id="link_OffsetProvider_JdbcOffsetProvider"><path d="M1264.44,167.53 C1335.03,183.86 1415.42,206.65 1485,237 C1510.71,248.21 1537.31,265.85 1556.14,279.54 " fill="none" id="OffsetProvider-backto-JdbcOffsetProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1263.3,174.23,1245.33,162.99,1266.38,160.57,1263.3,174.23" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c237d90f14085e8dcfe19ddcbbb184a2]
@startuml EventProcessorStream
'https://plantuml.com/class-diagram

skinparam monochrome true
hide empty members

package app.softnetwork.persistence {
    package query {
        abstract class JournalProvider <<(T,orchid) trait >>{
            #def eventsByTag(tag: String, offset: Offset): Source[EventEnvelope, NotUsed]
            #def currentPersistenceIds(): Source[String, NotUsed]
        }
        abstract class InMemoryJournalProvider <<(T,orchid) trait >> extends JournalProvider
        abstract class OffsetProvider <<(T,orchid) trait >>{
            #def initOffset(): Unit
            #def readOffset(): Future[Offset]
            #def writeOffset(offset: Offset): Future[Done]
        }
        abstract class InMemoryOffsetProvider <<(T,orchid) trait >> extends OffsetProvider
        JournalProvider <|.. EventProcessorStream: <<self>>
        OffsetProvider <|.. EventProcessorStream: <<self>>
        abstract class EventProcessorStream <E: Event> <<(T,orchid) trait >> extends EventStream {
            #def init(): Unit
            #def processEvent(event: E, persistenceId: PersistenceId, sequenceNr: Long): Future[Done]
        }
        abstract class EventStream <<(T,orchid) trait >> {
            +def tag: String
            +def eventProcessorId: String = tag
        }
    }
    package jdbc.query {
        abstract class JdbcJournalProvider <<(T,orchid) trait >> extends JournalProvider
        abstract class JdbcOffsetProvider <<(T,orchid) trait >> extends OffsetProvider
    }

}

@enduml

@startuml EventProcessorStream

skinparam monochrome true
hide empty members

package app.softnetwork.persistence {
    package query {
        abstract class JournalProvider <<(T,orchid) trait >>{
            #def eventsByTag(tag: String, offset: Offset): Source[EventEnvelope, NotUsed]
            #def currentPersistenceIds(): Source[String, NotUsed]
        }
        abstract class InMemoryJournalProvider <<(T,orchid) trait >> extends JournalProvider
        abstract class OffsetProvider <<(T,orchid) trait >>{
            #def initOffset(): Unit
            #def readOffset(): Future[Offset]
            #def writeOffset(offset: Offset): Future[Done]
        }
        abstract class InMemoryOffsetProvider <<(T,orchid) trait >> extends OffsetProvider
        JournalProvider <|.. EventProcessorStream: <<self>>
        OffsetProvider <|.. EventProcessorStream: <<self>>
        abstract class EventProcessorStream <E: Event> <<(T,orchid) trait >> extends EventStream {
            #def init(): Unit
            #def processEvent(event: E, persistenceId: PersistenceId, sequenceNr: Long): Future[Done]
        }
        abstract class EventStream <<(T,orchid) trait >> {
            +def tag: String
            +def eventProcessorId: String = tag
        }
    }
    package jdbc.query {
        abstract class JdbcJournalProvider <<(T,orchid) trait >> extends JournalProvider
        abstract class JdbcOffsetProvider <<(T,orchid) trait >> extends OffsetProvider
    }

}

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>